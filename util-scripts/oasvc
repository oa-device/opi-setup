#!/bin/bash

# Get the directory of the current script
UTIL_SCRIPT_DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"
SYSTEMD_DIR="$(dirname "$UTIL_SCRIPT_DIR")/systemd"

# Function to print a header
print_header() {
    local service_name="$1"
    echo "-------------------------------------------------"
    echo "Service: $service_name"
    echo "-------------------------------------------------"
}

# Function to check and print the status of a service
check_service_status() {
    local service_name="$1"
    print_header "$service_name"
    systemctl status "$service_name" --no-pager
    echo # Add a newline for better readability
}

# Check the status of slideshow-player.service first
check_service_status "slideshow-player.service"

# Dynamically find and check the status of all other services in the systemd/ folder
for service_file in "$SYSTEMD_DIR"/*.service; do
    service_name=$(basename "$service_file")

    # Skip the slideshow-player service since it's already checked
    if [ "$service_name" != "slideshow-player.service" ]; then
        check_service_status "$service_name"
    fi
done
